<div class="container text-center show-page-margin" >
  <h2 id="show-shop-title"><i class="fas fa-store"></i> <%= @shop.name %></h2>
  <!-- Change tab name to plural if multiple offers. -->
  <% @events.size > 1 ? tab_event = "Mes offres" : tab_event = "Mon offre" %>
  <ul class="nav nav-pills justify-content-around my-3">
    <li class="nav-item">
      <a class="nav-link active" href="#info" data-toggle="tab" style="text-decoration: none;" id="title-black">Information</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#offers" data-toggle="tab" style="text-decoration: none;" id="title-black"><%= tab_event %></a>
    </li>
  </ul>
  <div class="tab-content">
    <!-- Beginning of InfoTab -->
    <div class="tab-pane active" id="info">
      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <% @shop.photos.each_with_index do |photo, index| %>
            <li data-target="#carouselExampleIndicators" data-slide-to="<%= index %>" class="<%= index == 0 ? "active" : "" %>" ></li>
          <% end %>
        </ol>
        <div class="carousel-inner">
          <% @shop.photos.each_with_index do |photo, index| %>
            <div class="carousel-item <%= index == 0 ? "active" : "" %>">
              <%= cl_image_tag photo.key, height: 300, width: 400, crop: :fill, class:"d-block w-100" %>
            </div>
          <% end %>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Précédent</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Suivant</span>
        </a>
      </div>
      <div class="shop-tags">
        <% @shop.categories.each do |category| %>
          <p class="shop-tag"><%= category.name %></p>
        <% end %>
      </div>
      <p>Actif :<%= @shop.active %></p>
      <p id="shop-address"><i class="fas fa-map-marker-alt"></i> <%= @shop.address %></p>
      <p><i class="fas fa-book"></i> <%= @shop.description %></p>
      <%= link_to edit_shop_path(@shop), :class => "button-dashboard" do %>
        <i class="fas fa-edit"></i>
      <% end %>
    </div>
  <!-- End of INFO TAB & Beginning of Events Tab -->
    <div class="tab-pane" id="offers">
      <%= link_to new_shop_event_path(@shop), :class => "button-dashboard" do %>
        <i class="fas fa-plus"></i>
      <% end %>
      <% @events.each do |event| %>
        <div class="event-card">
          <div class="event-image">
            <div id="carousel<%= event.id %>" class="carousel slide" data-ride="carousel">
              <ol class="carousel-indicators">
                <% event.photos.each_with_index do |photo, index| %>
                  <li data-target="#carousel<%= event.id %>" data-slide-to="<%= index %>" class="<%= index == 0 ? "active" : "" %>" ></li>
                <% end %>
              </ol>
              <div class="carousel-inner">
                <% event.photos.each_with_index do |photo, index| %>
                  <div class="carousel-item <%= index == 0 ? "active" : "" %>">
                    <%= cl_image_tag photo.key, height: 300, width: 400, crop: :fill, class:"d-block w-100" %>
                  </div>
                <% end %>
              </div>
              <a class="carousel-control-prev" href="#carousel<%= event.id %>" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Précédent</span>
              </a>
              <a class="carousel-control-next" href="#carousel<%= event.id %>" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Suivant</span>
              </a>
            </div>
          <p class="offer-tag"><%= event.offer %></p>
          </div>
          <div class="event-detail">
            <div class="block-top">
              <h5> <%= event.title %> </h5>
              <div class="block-date">
                <i class="fas fa-calendar-alt" style="color: white;"></i>
                <p> Du <%= event.beg_date.strftime("%d/%m") %></p>
                <p> Au <%= event.end_date.strftime("%d/%m") %></p>
              </div>
            </div>
            <h6> <%= event.description %></h6>
            <hr>
            <div class="block-bottom">
              <div class="block-icon">
                <a><i class="far fa-heart" style="color: white;"></i></a>
                <a><i class="fas fa-share-alt" style="color: white;"></i></a>
                <%= link_to '<i class="fas fa-pen" style="color: white;"></i>'.html_safe , edit_shop_event_path(event.id) %>
              </div>
              <div class="block-button">
                <button type="button" data-toggle="modal" data-target="#qrcode">
                  QR Code
                </button>
                <%= render 'qrcode', qr: @qr %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
